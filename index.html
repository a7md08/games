<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Smart TV Player</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<style>
html,body{
  margin:0;
  width:100%;
  height:100%;
  background:transparent;   /* ✅ شفاف */
  overflow:hidden;
  font-family:system-ui,Arial;
}
#app{
  width:100%;
  height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
  background:transparent;   /* ✅ */
}

/* ===== حاوية الفيديو ===== */
#videoWrap{
  position:relative;
  width:100%;
  height:100%;
  background:transparent;   /* ✅ */
}

video{
  width:100%;
  height:100%;
  object-fit:contain;
  background:transparent;   /* ✅ */
}

/* ===== Loader ===== */
#loader{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  pointer-events:none;
  opacity:0;
  transition:.3s;
}
#loader.show{opacity:1}

.spinner{
  width:64px;height:64px;
  border:6px solid rgba(255,255,255,.15);
  border-top:6px solid #1db954;
  border-radius:50%;
  animation:spin 1s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}

/* ===== شريط التحكم ===== */
#bar{
  position:absolute;
  left:4%;
  right:4%;
  bottom:4%;
  padding:18px 26px;
  border-radius:30px;
  background:rgba(20,20,20,.7); /* فقط المشغل */
  backdrop-filter:blur(16px);
  display:none;
  align-items:center;
  gap:18px;
  opacity:0;
  transform:translateY(30px);
  transition:.35s ease;
}
#bar.show{opacity:1;transform:translateY(0)}

.btn{
  width:58px;height:58px;
  border-radius:50%;
  background:#111;
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:26px;
  cursor:pointer;
  transition:.25s;
}
.btn:hover{transform:scale(1.12)}

/* ===== شريط التقدم ===== */
#progress{
  flex:1;height:8px;
  background:#222;
  border-radius:20px;
  overflow:hidden;
  position:relative;
  cursor:pointer;
}
#buffer,#played{
  position:absolute;top:0;left:0;height:100%;
}
#buffer{background:rgba(255,255,255,.25)}
#played{background:#1db954}

#thumb{
  position:absolute;
  top:50%;
  transform:translate(-50%,-50%);
  width:18px;height:18px;
  border-radius:50%;
  background:#1db954;
}

/* ===== الوقت ===== */
#time{
  color:#eee;
  font-size:15px;
  min-width:140px;
  text-align:center;
}

/* ===== أيقونة الإيقاف ===== */
#pauseIcon{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:150px;
  color:#fff;
  opacity:0;
  pointer-events:none;
  transition:.3s;
}
#pauseIcon.show{opacity:.9}
</style>
</head>

<body>
<div id="app">

  <div id="videoWrap">
    <video id="video" playsinline></video>

    <div id="pauseIcon">▶</div>

    <div id="loader">
      <div class="spinner"></div>
    </div>

    <div id="bar">
      <div class="btn" id="play">▶</div>

      <div id="progress">
        <div id="buffer"></div>
        <div id="played"></div>
        <div id="thumb"></div>
      </div>

      <div id="time">00:00 / 00:00</div>
      <div class="btn" id="fs">⛶</div>
    </div>
  </div>

</div>

<script>
const INTRO_SRC="https://a7md08.github.io/Files/Web/Netflix_New_Logo_Animation_2019_1080p.mp4";
const MAIN_SRC="https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8";

const wrap=document.getElementById("videoWrap");
const v=document.getElementById("video");
const bar=document.getElementById("bar");
const playBtn=document.getElementById("play");
const fsBtn=document.getElementById("fs");
const played=document.getElementById("played");
const buffer=document.getElementById("buffer");
const thumb=document.getElementById("thumb");
const timeEl=document.getElementById("time");
const pauseIcon=document.getElementById("pauseIcon");
const progress=document.getElementById("progress");
const loader=document.getElementById("loader");

let isIntro=true;
let hls=null;

/* ===== المقدمة ===== */
v.src=INTRO_SRC;
v.muted=false;
v.play();

v.addEventListener("pause",()=>{ if(isIntro) v.play(); });

v.onended=()=>{
  if(isIntro){
    isIntro=false;
    loadMain();
  }
};

/* ===== الفيديو الرئيسي ===== */
function loadMain(){
  bar.style.display="flex";
  loader.classList.add("show");

  if(Hls.isSupported()){
    hls=new Hls();
    hls.loadSource(MAIN_SRC);
    hls.attachMedia(v);
  }else{
    v.src=MAIN_SRC;
  }
  v.play();
}

/* ===== Loader ===== */
v.addEventListener("waiting",()=>{ if(!isIntro) loader.classList.add("show"); });
v.addEventListener("playing",()=>{ loader.classList.remove("show"); });

/* ===== الوقت ===== */
function fmt(t){
  if(!t||isNaN(t)) return "00:00";
  return String(Math.floor(t/60)).padStart(2,"0")+":"+
         String(Math.floor(t%60)).padStart(2,"0");
}

v.ontimeupdate=()=>{
  if(isIntro) return;
  const p=(v.currentTime/v.duration)*100;
  played.style.width=p+"%";
  thumb.style.left=p+"%";
  timeEl.textContent=`${fmt(v.currentTime)} / ${fmt(v.duration)}`;
};

/* ===== البفر ===== */
v.onprogress=()=>{
  if(v.buffered.length && !isIntro){
    const end=v.buffered.end(v.buffered.length-1);
    buffer.style.width=(end/v.duration*100)+"%";
  }
};

/* ===== تحكم ===== */
playBtn.onclick=()=>v.paused?v.play():v.pause();
v.onclick=()=>v.paused?v.play():v.pause();

fsBtn.onclick=()=>{
  document.fullscreenElement
    ? document.exitFullscreen()
    : wrap.requestFullscreen();
};

v.onplay=()=>{
  playBtn.textContent="⏸";
  pauseIcon.classList.remove("show");
  showUI();
};
v.onpause=()=>{
  playBtn.textContent="▶";
  pauseIcon.classList.add("show");
  bar.classList.add("show");
};

/* ===== شريط التقدم ===== */
progress.onclick=e=>{
  if(isIntro) return;
  const r=progress.getBoundingClientRect();
  const p=(e.clientX-r.left)/r.width;
  v.currentTime=p*v.duration;
};

/* ===== إخفاء تلقائي ===== */
let uiTimer;
function showUI(){
  if(isIntro) return;
  bar.classList.add("show");
  clearTimeout(uiTimer);
  uiTimer=setTimeout(()=>{
    if(!v.paused) bar.classList.remove("show");
  },3000);
}
document.addEventListener("mousemove",showUI);
</script>
</body>
</html>
